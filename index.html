<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Loan Calculator - Smart Financial Planning</title>

    <!-- Inter Variable Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Modern styles -->
    <link rel="stylesheet" href="modern-styles.css" />
  </head>
  <body>
    <main class="container">
      <!-- Modern Header -->
      <header class="header">
        <div class="header-content">
          <div
            class="logo"
            style="display: flex; flex-direction: column; align-items: center"
          >
            <div style="font-size: 40px">üí∞</div>
            <div style="font-size: 12px; color: #fff; margin-top: 2px">
              Shubham
            </div>
          </div>
          <div class="header-text">
            <h1>Loan Calculator</h1>
            <p>üöÄ Faster Repayments, üíµ Smarter Gains</p>
          </div>
        </div>
      </header>

      <!-- Main Content Grid -->
      <div class="main-grid">
        <!-- Left Column: Inputs -->
        <div class="inputs-column">
          <!-- Loan Inputs Panel -->
          <div class="card collapsible-panel">
            <div class="panel-header" onclick="togglePanel('loan-inputs')">
              <h3>
                <svg
                  class="icon"
                  width="20"
                  height="20"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                  />
                </svg>
                Loan Inputs
              </h3>
              <svg
                class="chevron"
                width="20"
                height="20"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" />
              </svg>
            </div>

            <div id="loan-inputs" class="panel-content">
              <div class="loan-grid">
                <!-- Full Loan Amount (existing input preserved) -->
                <div class="form-group">
                  <label class="form-label">
                    <!-- (icon preserved from original label) -->
                    <svg
                      class="label-icon"
                      width="16"
                      height="16"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 ..."
                      ></path>
                    </svg>
                    Full Loan Amount (‚Çπ)
                  </label>
                  <input
                    id="loanAmount"
                    data-role="input"
                    type="number"
                    class="form-control input-yellow"
                    value="1000000"
                    min="0"
                  />
                  <div class="form-text loanAmountWords" id="loanAmountWords">
                    ‚Çπ 10,00,000 (Ten Lakh Rupees)
                  </div>
                </div>

                <!-- Interest Rate (existing input preserved) -->
                <div class="form-group">
                  <label class="form-label">
                    <svg
                      class="label-icon"
                      width="16"
                      height="16"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M9 11H7v9a2 2 0 002 2h8a2 2 0 002-2V9a2 2 0 00-2-2h2V5a2 2 0 012 0z"
                      ></path>
                    </svg>
                    Interest Rate (annual %)
                  </label>
                  <input
                    id="roiStart"
                    data-role="input"
                    type="number"
                    step="0.01"
                    class="form-control input-yellow"
                    value="7.5"
                    min="0"
                  />
                  <div
                    class="form-text interestRateWords"
                    id="interestRateWords"
                  >
                    Annual interest rate (e.g., 7.5%)
                  </div>
                </div>

                <!-- Tenure (existing input preserved) -->
                <div class="form-group">
                  <label class="form-label">
                    <svg
                      class="label-icon"
                      width="16"
                      height="16"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M9 11H7v9a2 2 0 002 2h8a2 2 0 002-2V9a2 2 0 00-2-2h2V5a2 2 0 012 0z"
                      ></path>
                    </svg>
                    Tenure (months)
                  </label>
                  <input
                    id="tenureMonths"
                    data-role="input"
                    type="number"
                    class="form-control input-yellow"
                    value="60"
                    min="1"
                  />
                  <div class="form-text tenureYearsWords" id="tenureYearsWords">
                    ‚è∞ 5.0 years
                  </div>
                </div>

                <!-- Total Loan (NEW readonly field, styled like your inputs) -->
                <div class="form-group">
                  <label class="form-label">
                    <!-- reused icon for consistent look -->
                    <svg
                      class="label-icon"
                      width="16"
                      height="16"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.8-2.15 1.79-.3 3.2-.9 3.2-2.35 0-1.2-1.08-2.2-3.1-2.2-1.86 0-3.2.9-3.2 2.15h-2.2c0-2.6 2.48-4.15 5.4-4.15 3.12 0 5.3 1.6 5.3 3.95 0 2.6-2.12 3.33-4.2 3.65-2.08.33-3.8 1.02-3.8 2.55 0 1.35 1.3 2.35 3.45 2.35 1.9 0 3.35-.86 3.35-2.25h2.15c0 2.6-2.28 4.3-5.5 4.3-3.2 0-5.45-1.66-5.45-4.1 0-2.4 2.08-3.23 4.15-3.6 2.07-.37 3.5-1.07 3.5-2.6 0-1.4-1.2-2.25-3.2-2.25-1.9 0-3.15.86-3.15 2.1h-2.2c0-2.4 2.04-4.1 5.35-4.1 3.36 0 5.85 1.7 5.85 4.35 0 2.45-2.3 3.22-4.55 3.5-2.24.28-3.75.98-3.75 2.45 0 1.4 1.4 2.3 3.45 2.3 2 0 3.6-.95 3.6-2.35h2.15c0 2.55-2.6 4.45-6 4.45-3.7 0-6.2-1.9-6.2-4.5 0-2.5 2.34-3.38 4.6-3.7 2.27-.32 3.9-1.05 3.9-2.6 0-1.56-1.6-2.6-3.9-2.6z"
                      ></path>
                    </svg>
                    Total Loan
                  </label>
                  <input
                    id="totalLoanWithAll"
                    class="form-control readonly-grey"
                    readonly
                    value=""
                  />
                  <div class="form-text totalLoanWithAll" id="totalLoanWithAll">
                    Total payable = Principal + Additional Disbursements +
                    Interest
                  </div>
                </div>
              </div>

              <!-- keep your original buttons / button-group unchanged below the grid -->
              <div class="button-group">
                <!-- existing generate/reset buttons left exactly as they were -->
                <button id="generateBtn" class="btn btn-primary">
                  <svg
                    width="16"
                    height="16"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                  </svg>
                  Generate
                </button>
                <button id="resetBtn" class="btn btn-muted" type="button">
                  <svg
                    width="16"
                    height="16"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                    />
                  </svg>
                  Reset
                </button>
              </div>
            </div>
          </div>

          <!-- Load Scenario Panel -->
          <div class="card collapsible-panel">
            <div class="panel-header" onclick="togglePanel('load-scenario')">
              <h3>
                <svg
                  class="icon"
                  width="20"
                  height="20"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"
                  />
                </svg>
                Load Saved Scenario
              </h3>
              <svg
                class="chevron"
                width="20"
                height="20"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" />
              </svg>
            </div>
            <div id="load-scenario" class="panel-content collapsed">
              <div class="form-group">
                <label class="form-label">Upload Saved File</label>
                <div class="file-upload-area">
                  <input id="loadFileInput" type="file" accept=".json" />
                  <div class="file-upload-text">
                    <svg
                      width="24"
                      height="24"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"
                      />
                    </svg>
                    <span>Choose scenario file or drag & drop</span>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">Loaded Scenario ID</label>
                <input
                  id="loadedScenarioId"
                  type="text"
                  class="form-control readonly-grey"
                  value="None loaded"
                  readonly
                />
              </div>

              <button id="loadScenarioBtn" class="btn btn-secondary" disabled>
                <svg
                  width="16"
                  height="16"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
                </svg>
                Load Selected Scenario
              </button>
            </div>
          </div>
        </div>

        <!-- Right Column: Summary -->
        <div class="summary-column">
          <div class="card summary-card">
            <div class="card-header">
              <h3>
                <svg
                  class="icon"
                  width="20"
                  height="20"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                  />
                </svg>
                Financial Summary
              </h3>
              <div class="progress-ring">
                <div class="progress-value" id="completionProgress">0%</div>
              </div>
            </div>

            <div class="metrics-grid">
              <div class="metric-item positive">
                <div class="metric-icon">
                  <svg
                    width="20"
                    height="20"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path d="M7 14l5-5 5 5z" />
                  </svg>
                </div>
                <div class="metric-content">
                  <div class="metric-label">Interest Saved (‚Çπ)</div>
                  <input
                    id="interestSaved"
                    type="text"
                    class="form-control readonly-grey metric-value-input"
                    value="0"
                    readonly
                  />
                  <div class="metric-trend" id="interestSavedPer">
                    +0% vs original
                  </div>
                </div>
              </div>

              <div class="metric-item">
                <div class="metric-icon">
                  <svg
                    width="20"
                    height="20"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M9 11H7v9a2 2 0 002 2h8a2 2 0 002-2V9a2 2 0 00-2-2h-3V5a2 2 0 00-2-2 2 2 0 00-2 2v2H7a2 2 0 00-2 2v2z"
                    />
                  </svg>
                </div>
                <div class="metric-content">
                  <div class="metric-label">Loan Completion Date</div>
                  <input
                    id="completionDate"
                    type="text"
                    class="form-control readonly-grey metric-value-input"
                    value="-"
                    readonly
                  />
                  <div class="metric-trend" id="monthsSaved">On schedule</div>
                </div>
              </div>

              <div class="metric-item">
                <div class="metric-content">
                  <div class="metric-label">Original Total Interest (‚Çπ)</div>
                  <input
                    id="origTotalInterest"
                    type="text"
                    class="form-control readonly-grey metric-value-input"
                    value="-"
                    readonly
                  />
                </div>
              </div>

              <div class="metric-item">
                <div class="metric-content">
                  <div class="metric-label">New Total Interest (‚Çπ)</div>
                  <input
                    id="newTotalInterest"
                    type="text"
                    class="form-control readonly-grey metric-value-input"
                    value="-"
                    readonly
                  />
                </div>
              </div>

              <div class="metric-item warning">
                <div class="metric-icon">
                  <svg
                    width="20"
                    height="20"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                    />
                  </svg>
                </div>
                <div class="metric-content">
                  <div class="metric-label">
                    Total Additional Disbursements (‚Çπ)
                  </div>
                  <input
                    id="totalDisbursements"
                    type="text"
                    class="form-control readonly-grey metric-value-input"
                    value="0"
                    readonly
                  />
                </div>
              </div>
            </div>

            <div class="scenario-info">
              <div class="form-group">
                <label class="form-label">Current Scenario</label>
                <input
                  id="currentScenarioId"
                  type="text"
                  class="form-control readonly-grey scenario-id"
                  value="Not saved yet"
                  readonly
                />
              </div>

              <button id="saveScenarioBtn" class="btn btn-success full-width">
                <svg
                  width="16"
                  height="16"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V7l-4-4z"
                  />
                </svg>
                Save This Scenario
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Amortization Schedule -->
      <div class="card table-card">
        <div class="card-header">
          <div class="table-header-content">
            <h3>
              <svg
                class="icon"
                width="20"
                height="20"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M3 3v18h18V3H3zm8 16H9v-6h2v6zm0-8H9V7h2v4zm6 8h-2v-6h2v6zm0-8h-2V7h2v4z"
                />
              </svg>
              Amortization Schedule
            </h3>
            <div class="table-controls">
              <button
                class="btn btn-secondary compact-view"
                onclick="toggleCompactView()"
              >
                <svg
                  width="16"
                  height="16"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                  style="margin-right: 4px"
                >
                  <path d="M3 4h18v2H3V4zm0 6h18v2H3v-2zm0 6h18v2H3v-2z" />
                </svg>
                Compact
              </button>

              <button class="btn btn-secondary" id="summaryReportBtn">
                <svg
                  width="16"
                  height="16"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                  style="margin-right: 6px"
                >
                  <path
                    d="M12 2a10 10 0 1 0 10 10h-8V2zM11 
             4.07V12h7.93A8 8 0 1 1 11 4.07z"
                  />
                </svg>
                Summary Report
              </button>

              <button class="btn btn-secondary" id="downloadCsv">
                <svg
                  width="16"
                  height="16"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"
                  />
                </svg>
                Download CSV
              </button>
            </div>
          </div>

          <!-- Quick Stats Bar -->
          <div class="stats-bar">
            <div class="stat-item">
              <i class="fas fa-wallet stat-icon"></i>
              <span class="stat-label">Monthly EMI</span>
              <span class="stat-value" id="monthlyEMI">‚Çπ0</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-percent stat-icon"></i>
              <span class="stat-label">Current ROI</span>
              <span class="stat-value" id="currentRoi">0</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-university stat-icon"></i>
              <span class="stat-label">Outstanding Balance</span>
              <span class="stat-value" id="currentOutstanding">‚Çπ0</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-calendar-alt stat-icon"></i>
              <span class="stat-label">LOAN START & EMI Left</span>
              <span class="stat-value" id="monthsRemaining">0</span>
            </div>
          </div>
        </div>

        <div
          class="table-wrapper"
          style="
            max-height: 650px !important;
            overflow-y: auto !important;
            overflow-x: auto !important;
            display: block !important;
          "
        >
          <table id="amortTable" class="modern-table">
            <thead>
              <tr>
                <th class="col-narrow">Sr. No.</th>
                <th class="col-month">Month</th>
                <th class="col-currency">EMI (‚Çπ)</th>
                <th class="col-currency">Interest Paid (‚Çπ)</th>
                <th class="col-currency">Principal Paid (‚Çπ)</th>
                <th class="col-input">Loan Disbursement (‚Çπ)</th>
                <th class="col-input">Prepayment Amount (‚Çπ)</th>
                <th class="col-input">Change in ROI (%)</th>
                <th class="col-currency">Outstanding (‚Çπ)</th>
              </tr>
            </thead>
            <tbody>
              <!-- Generated by JavaScript -->
            </tbody>
          </table>
        </div>

        <div class="table-footer">
          <div class="table-actions">
            <button
              id="applyChanges"
              class="btn btn-success"
              style="display: none"
            >
              <svg
                width="16"
                height="16"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
              </svg>
              Apply Changes
            </button>
          </div>

          <div class="table-info">
            <p>
              <strong>Tip:</strong> Prepayments reduce tenure ‚Ä¢ Disbursements
              adjust EMI ‚Ä¢ ROI changes affect future calculations
            </p>
          </div>
        </div>
      </div>

      <!-- Success/Error Messages -->
      <div id="messageContainer" class="message-container"></div>
      <div class="scroll-navigation">
        <button class="scroll-btn" onclick="scrollToTop()" title="Go to top">
          <svg fill="currentColor" viewBox="0 0 24 24">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" />
          </svg>
        </button>
        <button
          class="scroll-btn"
          onclick="scrollToBottom()"
          title="Go to bottom"
        >
          <svg fill="currentColor" viewBox="0 0 24 24">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z" />
          </svg>
        </button>
      </div>
    </main>

    <!-- JavaScript -->
    <script src="app.js"></script>
  </body>
</html>
